<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Catch</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <style>
        html {
            height: 100%;
        }

        body {
            margin: 0;
            padding: 0;
            min-height: 100%;
        }

        #main {
            width: 607px;
            height: 500px;
    
            position: absolute;
            margin: auto;

            top: 0;
            bottom: 0;
            left: 0;
            right: 0;

            background: var(--base01);
        }

        #time_wrap {
            position: absolute;
            top: 10px;
            left: 10px;
        }

        #count_wrap {
            position: absolute;
            top: 10px;
            right: 10px;
        }

        #pashka, #next-pashka {
            position: absolute;
            width: 50px;
            height: 50px;
            background: var(--base07);
        }

        #next-pashka {
            background: var(--base02);
        }
    </style>
</head>
<body>
    <div id="main">
        <div id="time_wrap">Time left: <span id="time">30</span></div>
        <div id="count_wrap">Score: <span id="count">-1</span></div>
        <div id="next-pashka"></div>
        <div id="pashka"></div>
    </div>

    <script>
        (function() {
            'use strict'

            // this code is shit and i know it, dont @ me

            let init = false;

            function pashka_event() {
                let count = document.getElementById('count');

                let main_style = getComputedStyle(document.getElementById('main'));
                let main_width = parseInt(main_style.width);
                let main_height = parseInt(main_style.height);
                
                let pashka = document.getElementById('pashka')
                let pashka_style = getComputedStyle(pashka);
                let pashka_width = parseInt(pashka_style.width);
                let pashka_height = parseInt(pashka_style.width);

                let next_pashka = document.getElementById('next-pashka');

                count.innerHTML = Number(count.innerHTML) + 1;

                if (!init) {
                    pashka.style.top = Math.floor((Math.random() * (main_height - pashka_height))) + 'px';
                    pashka.style.left = Math.floor((Math.random() * (main_width - pashka_width))) + 'px';

                    next_pashka.style.top = Math.floor((Math.random() * (main_height - pashka_height))) + 'px';
                    next_pashka.style.left = Math.floor((Math.random() * (main_width - pashka_width))) + 'px';

                    init = true;
                } else {
                    pashka.style.top = next_pashka.style.top;
                    pashka.style.left = next_pashka.style.left;

                    next_pashka.style.top = Math.floor((Math.random() * (main_height - pashka_height))) + 'px';
                    next_pashka.style.left = Math.floor((Math.random() * (main_width - pashka_width))) + 'px';
                }
            }

            pashka_event();

            document.getElementById('pashka').addEventListener('mousemove', pashka_event);

            function loop() {
                let time = document.getElementById('time');
                time.innerHTML = Number(time.innerHTML) - 1;
                if (time.innerHTML != "0") {
                    setTimeout(loop, 1000);
                } else {
                    document.getElementById('pashka').removeEventListener('mousemove', pashka_event);
                }
            }

            setTimeout(loop, 1000);
        })();
    </script>
</body>
</html>